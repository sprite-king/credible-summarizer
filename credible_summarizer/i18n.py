from typing import Dict

I18N: Dict[str, Dict[str, str]] = {
    "zh": {
        "title": "可信摘要 / 可追溯摘要小工具",
        "subtitle": "每条要点都附带原文引用，并在证据不足时提示不确定。",
        "settings": "参数设置",
        "lang": "界面语言",
        "points": "摘要要点数",
        "citations": "每条要点引用句数",
        "threshold": "不确定阈值（top1_score < threshold）",
        "gap": "引用不明确阈值（top1 - top2 < gap）",
        "context": "默认展开上下文",
        "style": "摘要风格",
        "style_bal": "均衡",
        "style_cons": "更保守",
        "style_cov": "更覆盖",
        "auto": "自动建议阈值",
        "dedup": "过滤重复要点",
        "dedup_thr": "去重相似度阈值",
        "input": "输入长文本",
        "upload": "上传文件（txt/pdf/doc/docx）",
        "upload_hint": "支持 txt / pdf / doc / docx，上传后会自动填充文本区",
        "upload_multi_hint": "支持多文件上传，生成合并报告",
        "upload_doc_notice": "DOC 需要先转换为 DOCX 或 TXT",
        "upload_missing_pdf": "缺少 PDF 解析依赖，请安装 PyPDF2",
        "upload_missing_docx": "缺少 DOCX 解析依赖，请安装 python-docx",
        "placeholder": "粘贴一段需要摘要的长文本…",
        "run": "生成可信摘要",
        "short": "文本过短，至少需要 3 句以上。",
        "section": "摘要要点",
        "uncertain": "⚠️ 不确定",
        "trusted": "✅ 可信",
        "uncertain_tip": "缺乏直接支撑或引用不明确",
        "export_md": "一键导出 Markdown",
        "export_json": "导出 JSON",
        "export_csv": "导出 CSV",
        "export_html": "导出 HTML",
        "export_docx": "导出 DOCX",
        "export_record": "导出运行记录",
        "info": "输入文本后点击“生成可信摘要”。",
        "context_label": "展开上下文",
        "original": "原文定位",
        "compare": "摘要对比",
        "compare_hint": "并排对比不同风格/阈值",
        "compare_current": "当前参数",
        "compare_conservative": "更保守",
        "compare_coverage": "更覆盖",
        "batch_mode": "批量模式",
        "combined_report": "合并报告",
        "use_jieba": "启用 jieba 分词（中文优化）",
        "jieba_missing": "未安装 jieba，已回退为字符 n-gram",
        "privacy": "隐私模式",
        "clear_cache": "清除本地缓存",
        "cache_cleared": "已清除缓存",
    },
    "en": {
        "title": "Credible / Traceable Summarizer",
        "subtitle": "Each bullet includes evidence and uncertainty signaling.",
        "settings": "Settings",
        "lang": "Language",
        "points": "Number of bullets",
        "citations": "Citations per bullet",
        "threshold": "Uncertainty threshold (top1_score < threshold)",
        "gap": "Ambiguity gap (top1 - top2 < gap)",
        "context": "Expand context by default",
        "style": "Summary style",
        "style_bal": "Balanced",
        "style_cons": "Conservative",
        "style_cov": "Coverage",
        "auto": "Auto-suggest thresholds",
        "dedup": "Deduplicate bullets",
        "dedup_thr": "Dedup similarity threshold",
        "input": "Input text",
        "upload": "Upload file (txt/pdf/doc/docx)",
        "upload_hint": "Supports txt / pdf / doc / docx. Text area will be filled after upload.",
        "upload_multi_hint": "Supports multi-file upload with combined report",
        "upload_doc_notice": "DOC requires conversion to DOCX or TXT",
        "upload_missing_pdf": "PDF parser missing. Please install PyPDF2",
        "upload_missing_docx": "DOCX parser missing. Please install python-docx",
        "placeholder": "Paste a long text…",
        "run": "Generate summary",
        "short": "Text is too short. At least 3 sentences required.",
        "section": "Summary bullets",
        "uncertain": "⚠️ Uncertain",
        "trusted": "✅ Credible",
        "uncertain_tip": "Lacking direct support or unclear citation",
        "export_md": "Export Markdown",
        "export_json": "Export JSON",
        "export_csv": "Export CSV",
        "export_html": "Export HTML",
        "export_docx": "Export DOCX",
        "export_record": "Export run record",
        "info": "Enter text and click Generate summary.",
        "context_label": "Context",
        "original": "Original text",
        "compare": "Compare",
        "compare_hint": "Side-by-side styles/thresholds",
        "compare_current": "Current",
        "compare_conservative": "Conservative",
        "compare_coverage": "Coverage",
        "batch_mode": "Batch mode",
        "combined_report": "Combined report",
        "use_jieba": "Enable jieba tokenization (Chinese)",
        "jieba_missing": "jieba not installed. Falling back to char n-gram",
        "privacy": "Privacy mode",
        "clear_cache": "Clear local cache",
        "cache_cleared": "Cache cleared",
    },
}


def t(key: str, lang: str) -> str:
    return I18N.get(lang, I18N["zh"]).get(key, key)
